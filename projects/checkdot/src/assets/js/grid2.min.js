function loadGrid(){const e=document.createElement("canvas"),t=e.getContext("2d"),o=(document.getElementById("canvas").appendChild(e).getContext("2d"),t.canvas);e.width=screen.width,e.height=screen.height;const n=o.getContext("2d"),l=document.getElementById("shift-btn"),i=(document.getElementById("key-btn"),document.getElementById("key-top-border")),a=document.getElementById("key-top-arrow"),y=document.getElementById("key-bottom-border"),d=document.getElementById("key-bottom-arrow"),r=document.getElementById("key-left-border"),h=document.getElementById("key-left-arrow"),c=document.getElementById("key-right-border"),f=document.getElementById("key-right-arrow");o.style.backgroundColor="black";const s=(window.innerWidth+window.innerHeight)/8,m=3,z=.2,x=50;let u,w,g,b,M=1,k=[],p={x:0,y:0,tx:0,ty:0,z:5e-4},E=!1,B=!1,v="LT";function I(e){e.x=Math.random()*u,e.y=Math.random()*w}function L(){M=window.devicePixelRatio||1,u=window.innerWidth*M,w=window.innerHeight*M,o.width=document.body.clientWidth,o.height=document.body.clientHeight,k.forEach(I)}function T(){g=null,b=null}!function(){const e=[];for(let o=0;o<s;o++)if(1==Math.floor(2*Math.random())&&e.length>0){var t=e[Math.floor(Math.random()*e.length)];k.push({x:0,y:0,z:z+Math.random()*(1-z),text:t})}else k.push({x:0,y:0,z:z+Math.random()*(1-z),shape:!0,color:"49,247,147"})}(),L(),function e(){n.clearRect(0,0,u,w),p.tx*=.96,p.ty*=.96,p.x+=.8*(p.tx-p.x),p.y+=.8*(p.ty-p.y),k.forEach(e=>{if(B&&"LT"==v)e.x+=p.x*e.z,e.y+=p.y*e.z,e.x+=(e.x-u/4)*p.z*e.z,e.y+=(e.y-w/4)*p.z*e.z,e.z+=p.z;else{switch(e.x+=p.x*e.z,e.y+=p.y*e.z,v){case"LT":e.x+=(e.x-u/2)*p.z*e.z,e.y+=(e.y-w/2)*p.z*e.z;break;case"T":e.x+=(e.x-u/4)*p.z*e.z,e.y+=(e.y+w/1)*p.z*e.z;break;case"B":e.x+=(e.x-u/4)*p.z*e.z,e.y+=(e.y-w/1)*p.z*e.z;break;case"R":e.x+=(e.x-u/1)*p.z*e.z,e.y+=(e.y-w/4)*p.z*e.z;break;case"L":e.x+=(e.x+u/4)*p.z*e.z,e.y+=(e.y-w/4)*p.z*e.z}e.z+=p.z}(e.x<-x||e.x>u+x||e.y<-x||e.y>w+x)&&function(e){let t="z",o=Math.abs(p.x),n=Math.abs(p.y);if(o>1||n>1){let e;t="h"==(e=o>n?Math.random()<o/(o+n)?"h":"v":Math.random()<n/(o+n)?"v":"h")?p.x>0?"l":"r":p.y>0?"t":"b"}e.z=z+Math.random()*(1-z),"z"===t?(e.z=.1,e.x=Math.random()*u,e.y=Math.random()*w):"l"===t?(e.x=-x,e.y=w*Math.random()):"r"===t?(e.x=u+x,e.y=w*Math.random()):"t"===t?(e.x=u*Math.random(),e.y=-x):"b"===t&&(e.x=u*Math.random(),e.y=w+x)}(e)}),k.forEach(e=>{if(e.shape){n.beginPath(),n.lineCap="round",n.lineWidth=m*e.z*M,n.strokeStyle=e.color?`rgba(${e.color},${.5+.5*Math.random()}`:`rgba(255,255,255,${.5+.5*Math.random()}`,n.beginPath(),n.moveTo(e.x,e.y);var t=2*p.x,o=2*p.y;Math.abs(t)<.1&&(t=.5),Math.abs(o)<.1&&(o=.5),n.lineTo(e.x+t,e.y+o),n.stroke()}else{n.beginPath(),n.fillStyle="#ffffff",n.font=Math.round(m*e.z*M*2)+"px Arial";var t=2*p.x,o=2*p.y;Math.abs(t)<.1&&(t=.5),Math.abs(o)<.1&&(o=.5),n.fillText(e.text,e.x+t,e.y+o)}}),requestAnimationFrame(e)}(),window.onresize=L,o.onmousemove=function(e){B||(E=!1,function(e,t){if("number"==typeof g&&"number"==typeof b){let o=e-g,n=t-b;p.tx=p.tx+o/8*M*(E?1:-1),p.ty=p.ty+n/8*M*(E?1:-1)}g=e,b=t}(e.clientX,e.clientY))},o.ontouchend=T,document.onkeydown=(e=>{if(console.log(e.code),"ArrowRight"!=e.code&&"KeyD"!=e.code||(v="R",B||(p.z=.005),c.style.fill="#39f694",f.style.fill="#39f694"),"ArrowLeft"!=e.code&&"KeyA"!=e.code||(v="L",B||(p.z=.005),r.style.fill="#39f694",h.style.fill="#39f694"),"ArrowUp"!=e.code&&"KeyW"!=e.code||(v="T",B||(p.z=.005),i.style.fill="#39f694",a.style.fill="#39f694"),"ArrowDown"!=e.code&&"KeyS"!=e.code||(v="B",B||(p.z=.005),y.style.fill="#39f694",d.style.fill="#39f694"),"ShiftLeft"==e.code){if(.05!=p.z){for(let e=0;e<2e3;e++)k.push({x:0,y:0,z:.01,shape:!0,color:"33,150,243",fly:!0});p.z=.05,B=!0}l.style.fill="#39f694"}}),document.onkeyup=(e=>{"ShiftLeft"==e.code&&(B&&(k=k.slice(0,k.length-2e3),p.z=5e-4,B=!1),l.style.fill="white"),B||(p.z=5e-4,v="LT"),i.style.fill="white",a.style.fill="white",y.style.fill="white",d.style.fill="white",r.style.fill="white",h.style.fill="white",c.style.fill="white",f.style.fill="white"}),document.onmouseleave=T}window.loadGrid=loadGrid;